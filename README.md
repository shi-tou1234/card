# 老年人应急信息卡 - 微信小程序

一款专为老年人设计的应急信息二维码生成小程序。通过填写个人信息、健康状况 and 紧急联系人，生成专属二维码。当老人遇到紧急情况时，好心人只需扫描二维码即可获取重要信息，及时提供帮助。

## 📱 功能特点

### 🔹 信息填写
- **基本信息**：姓名、年龄、血型
- **健康信息**：过敏史、病症/基础疾病、常用药物
- **家庭住址**：详细家庭地址
- **紧急联系人**：支持填写2个紧急联系人（姓名、关系、电话）

### 🔹 二维码生成
- 自动将填写的信息编码为二维码
- 二维码可保存到手机相册
- 可打印制成卡片放入钱包

### 🔹 扫码查看
- 扫描二维码即可查看老人的应急信息
- 一键拨打紧急联系人电话
- 提供 120/110/119 紧急电话快捷拨打

### 🔹 隐私保护
- 所有数据仅保存在本地
- 不上传任何个人信息到服务器
- 信息通过二维码加密传输

## 📂 项目结构

```
miniprogram/
├── app.js                 # 小程序入口文件
├── app.json               # 小程序配置
├── app.wxss               # 全局样式
├── project.config.json    # 项目配置
├── sitemap.json           # 站点地图
├── pages/
│   ├── index/             # 首页
│   │   ├── index.js
│   │   ├── index.json
│   │   ├── index.wxml
│   │   └── index.wxss
│   ├── form/              # 信息填写页
│   │   ├── form.js
│   │   ├── form.json
│   │   ├── form.wxml
│   │   └── form.wxss
│   ├── preview/           # 卡片预览页
│   │   ├── preview.js
│   │   ├── preview.json
│   │   ├── preview.wxml
│   │   └── preview.wxss
│   └── scan/              # 扫码查看页
│       ├── scan.js
│       ├── scan.json
│       ├── scan.wxml
│       └── scan.wxss
└── utils/
    ├── qrcode.js          # 二维码生成工具
    └── util.js            # 通用工具函数
```

## 🚀 使用方法

### 1. 导入项目

1. 下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 打开微信开发者工具，选择"导入项目"
3. 选择 `miniprogram` 文件夹
4. 填入自己的 AppID（可在"测试号"中使用测试 AppID）

### 2. 运行与调试

1. 导入成功后，点击"编译"按钮
2. 在左侧模拟器中预览效果
3. 可点击"预览"或"真机调试"在手机上测试

### 3. 发布上线

1. 在微信公众平台注册小程序账号
2. 在开发者工具中点击"上传"
3. 在微信公众平台提交审核
4. 审核通过后发布

## 📋 页面说明

### 首页 (pages/index)
- 展示小程序功能介绍
- 提供三个主要入口：创建卡片、查看我的卡片、扫码帮助他人
- 显示使用说明和隐私提示

### 信息填写页 (pages/form)
- 分区域填写个人信息
- 必填项标注星号
- 表单验证（姓名、联系人电话必填）
- 支持清空表单和加载已保存数据

### 卡片预览页 (pages/preview)
- 展示填写信息的卡片样式
- 生成并显示二维码
- 支持保存二维码到相册
- 支持编辑信息和分享

### 扫码查看页 (pages/scan)
- 展示被扫描者的应急信息
- 重点突出过敏史（红色警告）
- 一键拨打联系人电话
- 提供紧急电话（120/110/119）

## 🛠 技术实现

### 二维码生成
- 使用纯 JavaScript 实现 QR 码生成算法
- 支持中文编码（UTF-8 → Base64）
- 在 Canvas 上绘制并导出为图片

### 数据编码
- 使用 JSON 序列化用户信息
- Base64 编码确保二维码兼容性
- 前缀标识 `EMERGENCY_CARD:` 用于识别

### 本地存储
- 使用 `wx.setStorageSync` 保存用户数据
- 应用启动时自动加载已保存数据
- 支持清除本地数据

## 📝 注意事项

1. **隐私安全**：二维码包含个人信息，请妥善保管
2. **信息准确**：请确保填写的联系电话正确有效
3. **定期更新**：如信息有变化，请及时更新二维码
4. **卡片保存**：建议打印二维码制成卡片，放入钱包随身携带

## 🔄 更新日志

### v1.0.0 (2024-12)
- 初始版本发布
- 实现基本信息填写功能
- 实现二维码生成与保存
- 实现扫码查看功能

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！
