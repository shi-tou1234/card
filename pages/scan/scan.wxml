<!--pages/scan/scan.wxml-->
<view class="container">
  <!-- ç´§æ€¥æç¤º -->
  <view class="emergency-banner">
    <view class="banner-icon">ğŸ†˜</view>
    <view class="banner-text">
      <view class="banner-title">ç´§æ€¥æ±‚åŠ©ä¿¡æ¯</view>
      <view class="banner-subtitle">è¯·æ ¹æ®ä»¥ä¸‹ä¿¡æ¯æä¾›å¸®åŠ©</view>
    </view>
  </view>

  <!-- åº”æ€¥å¡ç‰‡ -->
  <view class="emergency-card">
    <!-- ä¸ªäººä¿¡æ¯ -->
    <view class="info-section main-section">
      <view class="person-info">
        <view class="name-row">
          <text class="person-name">{{cardData.name || 'æœªçŸ¥'}}</text>
          <view class="blood-tag" wx:if="{{cardData.blood}}">
            <text>{{cardData.blood}}</text>
          </view>
        </view>
        <view class="age-row" wx:if="{{cardData.age}}">
          <text class="age-text">{{cardData.age}}å²</text>
        </view>
      </view>
    </view>

    <!-- é‡è¦æé†’ - è¿‡æ• -->
    <view class="info-section warning-section" wx:if="{{cardData.allergy}}">
      <view class="section-header warning">
        <text class="section-icon">âš ï¸</text>
        <text class="section-title">è¿‡æ•å²ï¼ˆé‡è¦ï¼‰</text>
      </view>
      <view class="warning-content">
        <text>{{cardData.allergy}}</text>
      </view>
    </view>

    <!-- å¥åº·ä¿¡æ¯ -->
    <view class="info-section" wx:if="{{cardData.conditions || cardData.meds}}">
      <view class="section-header">
        <text class="section-icon">ğŸ’Š</text>
        <text class="section-title">å¥åº·ä¿¡æ¯</text>
      </view>
      <view class="info-content">
        <view class="info-item" wx:if="{{cardData.conditions}}">
          <text class="item-label">ç—…ç—‡/åŸºç¡€ç–¾ç—…</text>
          <text class="item-value">{{cardData.conditions}}</text>
        </view>
        <view class="info-item" wx:if="{{cardData.meds}}">
          <text class="item-label">å¸¸ç”¨è¯ç‰©</text>
          <text class="item-value">{{cardData.meds}}</text>
        </view>
      </view>
    </view>

    <!-- å®¶åº­ä½å€ -->
    <view class="info-section" wx:if="{{cardData.address}}">
      <view class="section-header">
        <text class="section-icon">ğŸ </text>
        <text class="section-title">å®¶åº­ä½å€</text>
      </view>
      <view class="info-content">
        <text class="address-text">{{cardData.address}}</text>
      </view>
    </view>

    <!-- ç´§æ€¥è”ç³»äºº -->
    <view class="info-section contacts-section">
      <view class="section-header">
        <text class="section-icon">ğŸ“</text>
        <text class="section-title">ç´§æ€¥è”ç³»äºº</text>
      </view>
      
      <view class="contact-list">
        <view class="contact-item" wx:if="{{cardData.c1_name}}" bindtap="callPhone" data-phone="{{cardData.c1_phone}}">
          <view class="contact-left">
            <view class="contact-avatar">
              <text>{{cardData.c1_name[0] || 'è”'}}</text>
            </view>
            <view class="contact-info">
              <text class="contact-name">{{cardData.c1_name}}</text>
              <text class="contact-relation" wx:if="{{cardData.c1_relation}}">{{cardData.c1_relation}}</text>
            </view>
          </view>
          <view class="contact-action">
            <view class="call-btn">
              <text class="call-icon">ğŸ“±</text>
              <text class="call-text">æ‹¨æ‰“</text>
            </view>
          </view>
        </view>

        <view class="contact-item" wx:if="{{cardData.c2_name}}" bindtap="callPhone" data-phone="{{cardData.c2_phone}}">
          <view class="contact-left">
            <view class="contact-avatar secondary">
              <text>{{cardData.c2_name[0] || 'è”'}}</text>
            </view>
            <view class="contact-info">
              <text class="contact-name">{{cardData.c2_name}}</text>
              <text class="contact-relation" wx:if="{{cardData.c2_relation}}">{{cardData.c2_relation}}</text>
            </view>
          </view>
          <view class="contact-action">
            <view class="call-btn secondary">
              <text class="call-icon">ğŸ“±</text>
              <text class="call-text">æ‹¨æ‰“</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç´§æ€¥ç”µè¯æç¤º -->
  <view class="emergency-tips">
    <view class="tip-title">ğŸš¨ ç´§æ€¥æƒ…å†µè¯·æ‹¨æ‰“</view>
    <view class="emergency-numbers">
      <view class="emergency-number" bindtap="callEmergency" data-phone="120">
        <text class="number">120</text>
        <text class="desc">æ€¥æ•‘ç”µè¯</text>
      </view>
      <view class="emergency-number" bindtap="callEmergency" data-phone="110">
        <text class="number">110</text>
        <text class="desc">æŠ¥è­¦ç”µè¯</text>
      </view>
      <view class="emergency-number" bindtap="callEmergency" data-phone="119">
        <text class="number">119</text>
        <text class="desc">æ¶ˆé˜²ç”µè¯</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æç¤º -->
  <view class="footer-tip">
    <text class="tip-icon">ğŸ’</text>
    <text class="tip-text">æ„Ÿè°¢æ‚¨çš„å–„æ„å¸®åŠ©</text>
  </view>

  <view class="safe-bottom"></view>
</view>
